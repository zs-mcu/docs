<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命令--7.2.文件权限（高级） | 小邵子</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script charset="utf-8" src="/js/custom.js"></script>
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b2140ca1d9ce57e6aac1a7709f5f5fe7";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <meta name="description" content="小邵子的个人笔记">
    <meta name="author" content="小邵子">
    <meta name="keywords" content="张邵,小邵子的 vuepress 个人博客">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.9632ee24.css" as="style"><link rel="preload" href="/assets/js/app.84fe6af9.js" as="script"><link rel="preload" href="/assets/js/2.57cc69f3.js" as="script"><link rel="preload" href="/assets/js/1.2250ab76.js" as="script"><link rel="preload" href="/assets/js/139.b931f69a.js" as="script"><link rel="preload" href="/assets/js/95.dbf66513.js" as="script"><link rel="prefetch" href="/assets/js/10.bb3a4c8b.js"><link rel="prefetch" href="/assets/js/100.cb3f754d.js"><link rel="prefetch" href="/assets/js/101.3606f9fe.js"><link rel="prefetch" href="/assets/js/102.3026752d.js"><link rel="prefetch" href="/assets/js/103.4afd6775.js"><link rel="prefetch" href="/assets/js/104.474b7985.js"><link rel="prefetch" href="/assets/js/105.7ab2382d.js"><link rel="prefetch" href="/assets/js/106.7580a683.js"><link rel="prefetch" href="/assets/js/107.fb8a995d.js"><link rel="prefetch" href="/assets/js/108.0fddcb64.js"><link rel="prefetch" href="/assets/js/109.e1975f92.js"><link rel="prefetch" href="/assets/js/11.33915784.js"><link rel="prefetch" href="/assets/js/110.8dc7e838.js"><link rel="prefetch" href="/assets/js/111.7103f14c.js"><link rel="prefetch" href="/assets/js/112.dfcce36b.js"><link rel="prefetch" href="/assets/js/113.26b1142d.js"><link rel="prefetch" href="/assets/js/114.12de21e6.js"><link rel="prefetch" href="/assets/js/115.858cafa7.js"><link rel="prefetch" href="/assets/js/116.d98b5d7e.js"><link rel="prefetch" href="/assets/js/117.1d2ced62.js"><link rel="prefetch" href="/assets/js/118.c69f867a.js"><link rel="prefetch" href="/assets/js/119.283fca38.js"><link rel="prefetch" href="/assets/js/12.06798330.js"><link rel="prefetch" href="/assets/js/120.748af014.js"><link rel="prefetch" href="/assets/js/121.6143c5f5.js"><link rel="prefetch" href="/assets/js/122.8a306c07.js"><link rel="prefetch" href="/assets/js/123.93751c61.js"><link rel="prefetch" href="/assets/js/124.3a306d27.js"><link rel="prefetch" href="/assets/js/125.0cb9d25b.js"><link rel="prefetch" href="/assets/js/126.5bf85956.js"><link rel="prefetch" href="/assets/js/127.8f734b41.js"><link rel="prefetch" href="/assets/js/128.94f15da0.js"><link rel="prefetch" href="/assets/js/129.d6e2b988.js"><link rel="prefetch" href="/assets/js/13.01c30914.js"><link rel="prefetch" href="/assets/js/130.20e0371a.js"><link rel="prefetch" href="/assets/js/131.4e95887d.js"><link rel="prefetch" href="/assets/js/132.2bf9ad8c.js"><link rel="prefetch" href="/assets/js/133.b2fc8903.js"><link rel="prefetch" href="/assets/js/134.b5b731c5.js"><link rel="prefetch" href="/assets/js/135.157780f6.js"><link rel="prefetch" href="/assets/js/136.06ead84d.js"><link rel="prefetch" href="/assets/js/137.43983280.js"><link rel="prefetch" href="/assets/js/138.09793524.js"><link rel="prefetch" href="/assets/js/14.5c391e32.js"><link rel="prefetch" href="/assets/js/140.b6d78ed4.js"><link rel="prefetch" href="/assets/js/141.944f91a7.js"><link rel="prefetch" href="/assets/js/142.e7fabc7e.js"><link rel="prefetch" href="/assets/js/143.e48b5c80.js"><link rel="prefetch" href="/assets/js/144.7b84ff7c.js"><link rel="prefetch" href="/assets/js/145.2474b9c1.js"><link rel="prefetch" href="/assets/js/146.50c98d93.js"><link rel="prefetch" href="/assets/js/147.5d8736e8.js"><link rel="prefetch" href="/assets/js/148.27b99c30.js"><link rel="prefetch" href="/assets/js/149.abc9f861.js"><link rel="prefetch" href="/assets/js/15.c70678ca.js"><link rel="prefetch" href="/assets/js/150.4f7b5131.js"><link rel="prefetch" href="/assets/js/151.bc09b9a7.js"><link rel="prefetch" href="/assets/js/152.385c5d99.js"><link rel="prefetch" href="/assets/js/153.3d651ce9.js"><link rel="prefetch" href="/assets/js/154.3a4104de.js"><link rel="prefetch" href="/assets/js/155.98f22058.js"><link rel="prefetch" href="/assets/js/156.f0851d5a.js"><link rel="prefetch" href="/assets/js/157.3fb74674.js"><link rel="prefetch" href="/assets/js/158.c43eaeea.js"><link rel="prefetch" href="/assets/js/159.0c51ca8f.js"><link rel="prefetch" href="/assets/js/16.9040e685.js"><link rel="prefetch" href="/assets/js/160.e93e4d38.js"><link rel="prefetch" href="/assets/js/161.0e6df7d3.js"><link rel="prefetch" href="/assets/js/162.8edcfc4a.js"><link rel="prefetch" href="/assets/js/163.f31f36de.js"><link rel="prefetch" href="/assets/js/164.da93556e.js"><link rel="prefetch" href="/assets/js/165.35538847.js"><link rel="prefetch" href="/assets/js/166.43092cb0.js"><link rel="prefetch" href="/assets/js/167.3b3b8f7b.js"><link rel="prefetch" href="/assets/js/168.6d8ed894.js"><link rel="prefetch" href="/assets/js/169.78134c6b.js"><link rel="prefetch" href="/assets/js/17.64c5a04d.js"><link rel="prefetch" href="/assets/js/170.e3c068ad.js"><link rel="prefetch" href="/assets/js/171.d0db1070.js"><link rel="prefetch" href="/assets/js/172.eb507ca1.js"><link rel="prefetch" href="/assets/js/173.213250bb.js"><link rel="prefetch" href="/assets/js/174.4cc58b21.js"><link rel="prefetch" href="/assets/js/175.740ebafa.js"><link rel="prefetch" href="/assets/js/176.8ec5e7cb.js"><link rel="prefetch" href="/assets/js/177.3b467ff7.js"><link rel="prefetch" href="/assets/js/178.d0787dcb.js"><link rel="prefetch" href="/assets/js/179.c56c4896.js"><link rel="prefetch" href="/assets/js/18.e0ad8a9e.js"><link rel="prefetch" href="/assets/js/180.5c63c9ff.js"><link rel="prefetch" href="/assets/js/181.6b639b21.js"><link rel="prefetch" href="/assets/js/182.3f7043ee.js"><link rel="prefetch" href="/assets/js/183.1685506d.js"><link rel="prefetch" href="/assets/js/184.4c1bb2ce.js"><link rel="prefetch" href="/assets/js/185.b57d7204.js"><link rel="prefetch" href="/assets/js/186.532430e3.js"><link rel="prefetch" href="/assets/js/187.faec10d9.js"><link rel="prefetch" href="/assets/js/188.241dac2b.js"><link rel="prefetch" href="/assets/js/189.1e03efad.js"><link rel="prefetch" href="/assets/js/19.28e46f0c.js"><link rel="prefetch" href="/assets/js/190.441a9832.js"><link rel="prefetch" href="/assets/js/191.8b67a15b.js"><link rel="prefetch" href="/assets/js/192.002103e6.js"><link rel="prefetch" href="/assets/js/193.baf18b8a.js"><link rel="prefetch" href="/assets/js/194.845ddacf.js"><link rel="prefetch" href="/assets/js/195.fbd196cf.js"><link rel="prefetch" href="/assets/js/196.dea60436.js"><link rel="prefetch" href="/assets/js/197.a537abc3.js"><link rel="prefetch" href="/assets/js/198.2fab9cd6.js"><link rel="prefetch" href="/assets/js/199.cbcf02c5.js"><link rel="prefetch" href="/assets/js/20.a2fec036.js"><link rel="prefetch" href="/assets/js/200.6b07535f.js"><link rel="prefetch" href="/assets/js/201.ee1defaa.js"><link rel="prefetch" href="/assets/js/202.be0021b3.js"><link rel="prefetch" href="/assets/js/203.a224f2fc.js"><link rel="prefetch" href="/assets/js/204.58c016a5.js"><link rel="prefetch" href="/assets/js/205.e80efbd7.js"><link rel="prefetch" href="/assets/js/206.73496822.js"><link rel="prefetch" href="/assets/js/207.458d7ca1.js"><link rel="prefetch" href="/assets/js/208.e0aa8559.js"><link rel="prefetch" href="/assets/js/209.3168ce2b.js"><link rel="prefetch" href="/assets/js/21.ffc19c97.js"><link rel="prefetch" href="/assets/js/210.4db87641.js"><link rel="prefetch" href="/assets/js/211.e8c99d08.js"><link rel="prefetch" href="/assets/js/212.55c695c2.js"><link rel="prefetch" href="/assets/js/213.d2f74b60.js"><link rel="prefetch" href="/assets/js/214.fa3ad6fe.js"><link rel="prefetch" href="/assets/js/215.e5e362b9.js"><link rel="prefetch" href="/assets/js/216.7b32ac60.js"><link rel="prefetch" href="/assets/js/217.2fa1437f.js"><link rel="prefetch" href="/assets/js/218.3d05f229.js"><link rel="prefetch" href="/assets/js/219.01f68eab.js"><link rel="prefetch" href="/assets/js/22.675f61b2.js"><link rel="prefetch" href="/assets/js/220.b50a0c3c.js"><link rel="prefetch" href="/assets/js/221.0bbfd2f7.js"><link rel="prefetch" href="/assets/js/222.ea428248.js"><link rel="prefetch" href="/assets/js/223.4c08f929.js"><link rel="prefetch" href="/assets/js/224.efe30d0e.js"><link rel="prefetch" href="/assets/js/225.d9bc1451.js"><link rel="prefetch" href="/assets/js/226.cca99e19.js"><link rel="prefetch" href="/assets/js/227.11168aa8.js"><link rel="prefetch" href="/assets/js/228.a8365063.js"><link rel="prefetch" href="/assets/js/229.05fb0434.js"><link rel="prefetch" href="/assets/js/23.21c68390.js"><link rel="prefetch" href="/assets/js/230.764bdea0.js"><link rel="prefetch" href="/assets/js/231.0d4af0f7.js"><link rel="prefetch" href="/assets/js/232.eace0b6d.js"><link rel="prefetch" href="/assets/js/233.28854cbe.js"><link rel="prefetch" href="/assets/js/234.9846ab13.js"><link rel="prefetch" href="/assets/js/235.3289f231.js"><link rel="prefetch" href="/assets/js/236.de890940.js"><link rel="prefetch" href="/assets/js/237.f08bfef3.js"><link rel="prefetch" href="/assets/js/238.decb51e8.js"><link rel="prefetch" href="/assets/js/239.000f51dd.js"><link rel="prefetch" href="/assets/js/24.3063a488.js"><link rel="prefetch" href="/assets/js/240.a6c55a1d.js"><link rel="prefetch" href="/assets/js/241.3232dabe.js"><link rel="prefetch" href="/assets/js/242.63959b4a.js"><link rel="prefetch" href="/assets/js/243.c979ede0.js"><link rel="prefetch" href="/assets/js/244.ef104ca7.js"><link rel="prefetch" href="/assets/js/245.64eaa985.js"><link rel="prefetch" href="/assets/js/25.07556b66.js"><link rel="prefetch" href="/assets/js/26.ea236397.js"><link rel="prefetch" href="/assets/js/27.fd8a2419.js"><link rel="prefetch" href="/assets/js/28.200aca67.js"><link rel="prefetch" href="/assets/js/29.b582504c.js"><link rel="prefetch" href="/assets/js/3.137d7fb7.js"><link rel="prefetch" href="/assets/js/30.54dd5e1a.js"><link rel="prefetch" href="/assets/js/31.d5191907.js"><link rel="prefetch" href="/assets/js/32.3f917cc8.js"><link rel="prefetch" href="/assets/js/33.8dddbb3a.js"><link rel="prefetch" href="/assets/js/34.ad694ef6.js"><link rel="prefetch" href="/assets/js/35.a93ead4f.js"><link rel="prefetch" href="/assets/js/36.21e65f90.js"><link rel="prefetch" href="/assets/js/37.0be36ea2.js"><link rel="prefetch" href="/assets/js/38.bc557fe7.js"><link rel="prefetch" href="/assets/js/39.13819425.js"><link rel="prefetch" href="/assets/js/4.cae93daa.js"><link rel="prefetch" href="/assets/js/40.3eb47e75.js"><link rel="prefetch" href="/assets/js/41.56193b35.js"><link rel="prefetch" href="/assets/js/42.fc17a8b9.js"><link rel="prefetch" href="/assets/js/43.f0bc036e.js"><link rel="prefetch" href="/assets/js/44.0dc70836.js"><link rel="prefetch" href="/assets/js/45.683b98b1.js"><link rel="prefetch" href="/assets/js/46.dbf56fe2.js"><link rel="prefetch" href="/assets/js/47.4a20343f.js"><link rel="prefetch" href="/assets/js/48.243ee25d.js"><link rel="prefetch" href="/assets/js/49.21dd6583.js"><link rel="prefetch" href="/assets/js/5.e44e4152.js"><link rel="prefetch" href="/assets/js/50.3da04a53.js"><link rel="prefetch" href="/assets/js/51.8f370d95.js"><link rel="prefetch" href="/assets/js/52.259921f1.js"><link rel="prefetch" href="/assets/js/53.381645e9.js"><link rel="prefetch" href="/assets/js/54.9a7c8364.js"><link rel="prefetch" href="/assets/js/55.3722268c.js"><link rel="prefetch" href="/assets/js/56.49e7ed45.js"><link rel="prefetch" href="/assets/js/57.a0e663ad.js"><link rel="prefetch" href="/assets/js/58.effd55d6.js"><link rel="prefetch" href="/assets/js/59.e8abebdb.js"><link rel="prefetch" href="/assets/js/6.4bb31a58.js"><link rel="prefetch" href="/assets/js/60.07a55110.js"><link rel="prefetch" href="/assets/js/61.0ff93446.js"><link rel="prefetch" href="/assets/js/62.e89ceb4b.js"><link rel="prefetch" href="/assets/js/63.34386352.js"><link rel="prefetch" href="/assets/js/64.86b7ca58.js"><link rel="prefetch" href="/assets/js/65.e6e1db4f.js"><link rel="prefetch" href="/assets/js/66.fa2637f7.js"><link rel="prefetch" href="/assets/js/67.6f3d1d21.js"><link rel="prefetch" href="/assets/js/68.71c81916.js"><link rel="prefetch" href="/assets/js/69.d0e92fbd.js"><link rel="prefetch" href="/assets/js/7.de6f05e6.js"><link rel="prefetch" href="/assets/js/70.6a834161.js"><link rel="prefetch" href="/assets/js/71.0459c535.js"><link rel="prefetch" href="/assets/js/72.e6f0559b.js"><link rel="prefetch" href="/assets/js/73.1bfef368.js"><link rel="prefetch" href="/assets/js/74.2f4858e4.js"><link rel="prefetch" href="/assets/js/75.3f88f459.js"><link rel="prefetch" href="/assets/js/76.73a2cb25.js"><link rel="prefetch" href="/assets/js/77.54501a77.js"><link rel="prefetch" href="/assets/js/78.4ab45fdd.js"><link rel="prefetch" href="/assets/js/79.e8c89ad7.js"><link rel="prefetch" href="/assets/js/80.338c395f.js"><link rel="prefetch" href="/assets/js/81.90872477.js"><link rel="prefetch" href="/assets/js/82.5c23ecca.js"><link rel="prefetch" href="/assets/js/83.9ed3accb.js"><link rel="prefetch" href="/assets/js/84.466d5d64.js"><link rel="prefetch" href="/assets/js/85.cd0a31ee.js"><link rel="prefetch" href="/assets/js/86.01911cd5.js"><link rel="prefetch" href="/assets/js/87.69378ec9.js"><link rel="prefetch" href="/assets/js/88.be085d91.js"><link rel="prefetch" href="/assets/js/89.1f7b9d18.js"><link rel="prefetch" href="/assets/js/90.cae775e2.js"><link rel="prefetch" href="/assets/js/91.ff533346.js"><link rel="prefetch" href="/assets/js/92.fb57de0b.js"><link rel="prefetch" href="/assets/js/93.17777966.js"><link rel="prefetch" href="/assets/js/94.6a96ccd0.js"><link rel="prefetch" href="/assets/js/96.2b482421.js"><link rel="prefetch" href="/assets/js/97.dcdfb785.js"><link rel="prefetch" href="/assets/js/98.30fe83d4.js"><link rel="prefetch" href="/assets/js/99.a49f000d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a8254278.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9632ee24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小邵子</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux" class="dropdown-title"><span class="title">linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="linux" class="mobile-dropdown-title"><span class="title">linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-use/linux/基本使用/" class="nav-link">
  基本使用
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/常见问题/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/shell编程/" class="nav-link">
  shell编程
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/虚拟化/" class="nav-link">
  虚拟化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/中间件/docker/" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小工具" class="dropdown-title"><span class="title">小工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="小工具" class="mobile-dropdown-title"><span class="title">小工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/小工具/axure/" class="nav-link">
  axure
</a></li><li class="dropdown-item"><!----> <a href="/小工具/cygwin/" class="nav-link">
  cygwin
</a></li><li class="dropdown-item"><!----> <a href="/小工具/markmap/" class="nav-link">
  markmap
</a></li><li class="dropdown-item"><!----> <a href="/小工具/html2md/" class="nav-link">
  html2md
</a></li><li class="dropdown-item"><!----> <a href="/小工具/markdown/" class="nav-link">
  markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/js/JSON-stringify函数.html" class="nav-link">
  js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-se" class="dropdown-title"><span class="title">zs-se</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-se" class="mobile-dropdown-title"><span class="title">zs-se</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-se/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/zs-se/设计模式/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/zs-se/io/" class="nav-link">
  io
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-ee-框架" class="dropdown-title"><span class="title">zs-ee-框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-ee-框架" class="mobile-dropdown-title"><span class="title">zs-ee-框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-ee-框架/mybatis-plus/" class="nav-link">
  mybatis-plus
</a></li><li class="dropdown-item"><!----> <a href="/zs-ee-框架/spring/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/zs-ee-框架/cloud-gateway/" class="nav-link">
  cloud-gateway
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-tool-小结" class="dropdown-title"><span class="title">zs-tool-小结</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-tool-小结" class="mobile-dropdown-title"><span class="title">zs-tool-小结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-tool-小结/面经手册/面试--0.开篇.html" class="nav-link">
  面经手册
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-小结/网址收藏/实用网站.html" class="nav-link">
  网址收藏
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-小结/文件/" class="nav-link">
  文件
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-tool-框架" class="dropdown-title"><span class="title">zs-tool-框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-tool-框架" class="mobile-dropdown-title"><span class="title">zs-tool-框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-tool-框架/vuepress/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-框架/java报表/" class="nav-link">
  java报表
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-框架/消息推送/消息推送技术方案.html" class="nav-link">
  消息推送
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-use" class="dropdown-title"><span class="title">zs-use</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-use" class="mobile-dropdown-title"><span class="title">zs-use</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zs-use/linux/基本使用/" class="nav-link">
  基本使用
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/常见问题/" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/shell编程/" class="nav-link">
  shell编程
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/虚拟化/" class="nav-link">
  虚拟化
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/zs-use/idea/" class="nav-link">
  IDEA
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/env/" class="nav-link">
  env
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/maven/自定义archetype-01.html" class="nav-link">
  maven
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/下载视频/下载器.html" class="nav-link">
  下载视频
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-web" class="dropdown-title"><span class="title">zs-web</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-web" class="mobile-dropdown-title"><span class="title">zs-web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-web/tool-小结/" class="nav-link">
  tool-小结
</a></li><li class="dropdown-item"><!----> <a href="/zs-web/project/html/" class="nav-link">
  project
</a></li><li class="dropdown-item"><!----> <a href="/zs-web/node/nvm--安装.html" class="nav-link">
  node
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-project" class="dropdown-title"><span class="title">zs-project</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-project" class="mobile-dropdown-title"><span class="title">zs-project</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-project/mallchat/" class="nav-link">
  mallchat
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux" class="dropdown-title"><span class="title">linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="linux" class="mobile-dropdown-title"><span class="title">linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-use/linux/基本使用/" class="nav-link">
  基本使用
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/常见问题/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/shell编程/" class="nav-link">
  shell编程
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/linux/虚拟化/" class="nav-link">
  虚拟化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/中间件/docker/" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小工具" class="dropdown-title"><span class="title">小工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="小工具" class="mobile-dropdown-title"><span class="title">小工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/小工具/axure/" class="nav-link">
  axure
</a></li><li class="dropdown-item"><!----> <a href="/小工具/cygwin/" class="nav-link">
  cygwin
</a></li><li class="dropdown-item"><!----> <a href="/小工具/markmap/" class="nav-link">
  markmap
</a></li><li class="dropdown-item"><!----> <a href="/小工具/html2md/" class="nav-link">
  html2md
</a></li><li class="dropdown-item"><!----> <a href="/小工具/markdown/" class="nav-link">
  markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/js/JSON-stringify函数.html" class="nav-link">
  js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-se" class="dropdown-title"><span class="title">zs-se</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-se" class="mobile-dropdown-title"><span class="title">zs-se</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-se/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/zs-se/设计模式/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/zs-se/io/" class="nav-link">
  io
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-ee-框架" class="dropdown-title"><span class="title">zs-ee-框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-ee-框架" class="mobile-dropdown-title"><span class="title">zs-ee-框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-ee-框架/mybatis-plus/" class="nav-link">
  mybatis-plus
</a></li><li class="dropdown-item"><!----> <a href="/zs-ee-框架/spring/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/zs-ee-框架/cloud-gateway/" class="nav-link">
  cloud-gateway
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-tool-小结" class="dropdown-title"><span class="title">zs-tool-小结</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-tool-小结" class="mobile-dropdown-title"><span class="title">zs-tool-小结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-tool-小结/面经手册/面试--0.开篇.html" class="nav-link">
  面经手册
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-小结/网址收藏/实用网站.html" class="nav-link">
  网址收藏
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-小结/文件/" class="nav-link">
  文件
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-tool-框架" class="dropdown-title"><span class="title">zs-tool-框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-tool-框架" class="mobile-dropdown-title"><span class="title">zs-tool-框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-tool-框架/vuepress/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-框架/java报表/" class="nav-link">
  java报表
</a></li><li class="dropdown-item"><!----> <a href="/zs-tool-框架/消息推送/消息推送技术方案.html" class="nav-link">
  消息推送
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-use" class="dropdown-title"><span class="title">zs-use</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-use" class="mobile-dropdown-title"><span class="title">zs-use</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zs-use/linux/基本使用/" class="nav-link">
  基本使用
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/常见问题/" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/shell编程/" class="nav-link">
  shell编程
</a></li><li class="dropdown-subitem"><a href="/zs-use/linux/虚拟化/" class="nav-link">
  虚拟化
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/zs-use/idea/" class="nav-link">
  IDEA
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/env/" class="nav-link">
  env
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/maven/自定义archetype-01.html" class="nav-link">
  maven
</a></li><li class="dropdown-item"><!----> <a href="/zs-use/下载视频/下载器.html" class="nav-link">
  下载视频
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-web" class="dropdown-title"><span class="title">zs-web</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-web" class="mobile-dropdown-title"><span class="title">zs-web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-web/tool-小结/" class="nav-link">
  tool-小结
</a></li><li class="dropdown-item"><!----> <a href="/zs-web/project/html/" class="nav-link">
  project
</a></li><li class="dropdown-item"><!----> <a href="/zs-web/node/nvm--安装.html" class="nav-link">
  node
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="zs-project" class="dropdown-title"><span class="title">zs-project</span> <span class="arrow down"></span></button> <button type="button" aria-label="zs-project" class="mobile-dropdown-title"><span class="title">zs-project</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zs-project/mallchat/" class="nav-link">
  mallchat
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基本使用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zs-use/linux/基本使用/shell--alias.html" class="sidebar-link">shell--alias</a></li><li><a href="/zs-use/linux/基本使用/shell--history.html" class="sidebar-link">shell--history命令</a></li><li><a href="/zs-use/linux/基本使用/shell--grep和管道符.html" class="sidebar-link">shell--grep和管道符</a></li><li><a href="/zs-use/linux/基本使用/shell--相关符号.html" class="sidebar-link">shell--相关符号</a></li><li><a href="/zs-use/linux/基本使用/命令--0.简易版.html" class="sidebar-link">命令--0.简易版</a></li><li><a href="/zs-use/linux/基本使用/命令--1.基本格式.html" class="sidebar-link">命令--1.基本格式</a></li><li><a href="/zs-use/linux/基本使用/命令--2.关机、重启.html" class="sidebar-link">命令--2.关机、重启</a></li><li><a href="/zs-use/linux/基本使用/命令--3.Linux帮助文档.html" class="sidebar-link">命令--3.Linux帮助文档</a></li><li><a href="/zs-use/linux/基本使用/命令--4.文件操作管理.html" class="sidebar-link">命令--4.文件操作管理</a></li><li><a href="/zs-use/linux/基本使用/命令--5.查找命令.html" class="sidebar-link">命令--5.查找命令</a></li><li><a href="/zs-use/linux/基本使用/命令--7.1.文件权限（普通）.html" class="sidebar-link">命令--7.1.文件权限(普通)</a></li><li><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html" class="active sidebar-link">命令--7.2.文件权限（高级）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#_1、冒险位-setuid" class="sidebar-link">1、冒险位(SETUID)</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#_2、强制位-setgid" class="sidebar-link">2、强制位(SETGID)</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#_3、粘滞位-sticky" class="sidebar-link">3、粘滞位(STICKY)</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#默认权限-了解" class="sidebar-link">默认权限(了解)</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#acl" class="sidebar-link">ACL</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#chattr" class="sidebar-link">chattr</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#作业1" class="sidebar-link">作业1</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#作业2" class="sidebar-link">作业2</a></li><li class="sidebar-sub-header"><a href="/zs-use/linux/基本使用/命令--7.2.文件权限（高级）.html#综合练习" class="sidebar-link">综合练习</a></li></ul></li><li><a href="/zs-use/linux/基本使用/命令--8.网络配置.html" class="sidebar-link">命令--8.网络配置</a></li><li><a href="/zs-use/linux/基本使用/命令--9.1.文件系统（查看）.html" class="sidebar-link">命令--9.1.文件系统（查看）</a></li><li><a href="/zs-use/linux/基本使用/命令--10.挂载.html" class="sidebar-link">命令--10.挂载</a></li><li><a href="/zs-use/linux/基本使用/命令--11.包管理工具.html" class="sidebar-link">命令--11.包管理工具</a></li><li><a href="/zs-use/linux/基本使用/命令--12.打包压缩.html" class="sidebar-link">命令--12.打包压缩</a></li><li><a href="/zs-use/linux/基本使用/命令--13.时间日期.html" class="sidebar-link">命令--13.时间日期</a></li><li><a href="/zs-use/linux/基本使用/命令--14.痕迹.html" class="sidebar-link">命令--14.痕迹</a></li><li><a href="/zs-use/linux/基本使用/命令--15.echo.html" class="sidebar-link">命令--15.echo</a></li><li><a href="/zs-use/linux/基本使用/命令--16.vim编辑器.html" class="sidebar-link">命令--16.vim编辑器</a></li><li><a href="/zs-use/linux/基本使用/系统管理--1.启动引导与修复.html" class="sidebar-link">系统管理--1.启动引导与修复</a></li><li><a href="/zs-use/linux/基本使用/系统管理--3.1.系统管理.html" class="sidebar-link">系统管理--3.1.系统管理</a></li><li><a href="/zs-use/linux/基本使用/系统管理--3.2.系统管理-定时任务.html" class="sidebar-link">系统管理--3.2.系统管理-定时任务</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务管理</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="命令-7-2-文件权限-高级"><a href="#命令-7-2-文件权限-高级" class="header-anchor">#</a> 命令--7.2.文件权限（高级）</h1> <p>李大毛：file1——&gt;属主和属组是李大毛</p> <p>王二狗：使用<font color="red">vim编辑器</font>修改李大毛的文件file1</p> <h2 id="_1、冒险位-setuid"><a href="#_1、冒险位-setuid" class="header-anchor">#</a> 1、冒险位(SETUID)</h2> <ul><li><p>冒险位，指文件操作者(用户)<font color="red">临时拥有</font>文件<font color="red">拥有者</font>的权限</p></li> <li><p>冒险位，一般针对的是<font color="red">命令</font>或者<font color="red">脚本文件</font></p></li> <li><p>冒险位，用字母表示是<font color="red">s或S</font>；数字表示是<font color="red">4</font></p></li> <li><p>冒险位的设置：<code>chmod u+s 文件名</code> 或者 <code>chmod 4xxx 文件名</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/vim</span>
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">2294216</span> <span class="token number">6</span>月  <span class="token number">28</span> <span class="token number">2019</span> /usr/bin/vim

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># chmod u+s /usr/bin/vim</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/vim</span>
-rwsr-xr-x <span class="token number">1</span> root root <span class="token number">2294216</span> <span class="token number">6</span>月  <span class="token number">28</span> <span class="token number">2019</span> /usr/bin/vim

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># chmod 0755 /usr/bin/vim</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/vim</span>
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">2294216</span> <span class="token number">6</span>月  <span class="token number">28</span> <span class="token number">2019</span> /usr/bin/vim
</code></pre></div></li></ul> <h2 id="_2、强制位-setgid"><a href="#_2、强制位-setgid" class="header-anchor">#</a> 2、强制位(SETGID)</h2> <ul><li><p>强制位，一般针对的是<font color="red">目录</font></p> <p>如果一个目录拥有强制位，那么<font color="red">任何用户</font>在该目录里所创建的任何文件的<font color="red">属组</font>都会继承<font color="red">该目录的属组</font>。/dir1----&gt;admin yunwei---&gt;/dir1/file1</p></li> <li><p>强制位，用字母表示是<font color="red">s或S</font>；数字表示是<font color="red">2</font></p></li> <li><p>强制位的设置： <code>chmod g+s 文件名</code> 或者 <code>chmod 2xxx 文件名</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># chmod 2755 dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">12</span>
drwxr-sr-x+ <span class="token number">2</span> root root <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:44 dir1


<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># chmod g-s dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">12</span>
drwxr-xr-x+ <span class="token number">2</span> root root <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:44 dir1
</code></pre></div></li></ul> <h2 id="_3、粘滞位-sticky"><a href="#_3、粘滞位-sticky" class="header-anchor">#</a> 3、粘滞位(STICKY)</h2> <ul><li><p>粘滞位，一般针对的是<font color="red">公共目录</font></p> <p>如果一个公共目录拥有粘滞位，那么该目录下的文件，只有<font color="red">root</font>和<font color="red">文件的创建</font>者可以删除，其他人只能自己管理自己。（A用户不能删除B用户创建的文件）</p> <p><font color="red">控制删除！</font>针对公共目录——》任何人都可以使用</p></li> <li><p>粘滞位，用字母表示是<font color="red">t或T</font>；数字表示是<font color="red">1</font></p></li> <li><p>粘滞位的设置： <code>chmod o+t 文件名</code> 或者 <code>chmod 1xxx 文件名</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll -d /tmp/</span>
drwxrwxrwt. <span class="token number">10</span> root root <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:27 /tmp/

</code></pre></div></li></ul> <h3 id="二-高级权限设置"><a href="#二-高级权限设置" class="header-anchor">#</a> ㈡ 高级权限设置</h3> <h4 id="_1、冒险位举例"><a href="#_1、冒险位举例" class="header-anchor">#</a> 1、冒险位举例</h4> <div class="language-powershell extra-class"><pre class="language-powershell"><code>需求：
给一个vim命令设置冒险位，目的是任何人拿vim去修改文件可以临时获得文件拥有者的权限

<span class="token namespace">[root@heima tmp]</span><span class="token comment"># which vim</span>
<span class="token operator">/</span>usr/bin/vim
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># ll /usr/bin/vim</span>
<span class="token operator">-</span>rwxr-xr-x<span class="token punctuation">.</span> 1 root root 2324712 Dec 22 2016 <span class="token operator">/</span>usr/bin/vim
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># chmod u+s /usr/bin/vim</span>
或者
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># chmod 4755 /usr/bin/vim</span>
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># ll /usr/bin/vim</span>
<span class="token operator">-</span>rwsr-xr-x<span class="token punctuation">.</span> 1 root root 2324712 Dec 22 2016 <span class="token operator">/</span>usr/bin/vim
测试验证，普通用户使用vim修改一个本没有权限修改的文件：
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># ll /etc/passwd</span>
<span class="token operator">-</span>rw-r-<span class="token operator">-</span>r-<span class="token operator">-</span><span class="token punctuation">.</span> 1 root root 1650 Mar 5 20:39 <span class="token operator">/</span>etc/passwd
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># su - user01</span>
<span class="token namespace">[user01@localhost ~]</span>$ vim <span class="token operator">/</span>etc/passwd
验证是否可以修改成功，如果可以，说明user01用户临时拥有了<span class="token operator">/</span>etc/passwd文件拥有者的权限
</code></pre></div><h4 id="_2、强制位举例"><a href="#_2、强制位举例" class="header-anchor">#</a> 2、强制位举例</h4> <div class="language-powershell extra-class"><pre class="language-powershell"><code>需求：
给目录dir2设置一个强制位，测试是否任何人在该目录里创建的文件属组都是该目录的属组

<span class="token namespace">[root@heima tmp]</span><span class="token comment"># ll -d dir2</span>
drwxr-xr-x<span class="token punctuation">.</span> 2 root root 4096 Mar 6 13:42 dir2
给dir2增加强制位：
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># chmod g+s dir2</span>
给dir2目录设置权限，让其他人可以写
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># chmod o+w dir2</span>
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># ll -d dir2</span>
drwxr-srwx<span class="token punctuation">.</span> 2 root root 4096 Mar 6 13:42 dir2
测试普通用户user01在dir2目录里创建文件的属组是否是dir2的属组
<span class="token namespace">[root@heima tmp]</span><span class="token comment"># su - user01</span>
<span class="token namespace">[user01@localhost ~]</span>$ touch <span class="token operator">/</span>tmp/dir2/file1
<span class="token namespace">[user01@localhost ~]</span>$ ll <span class="token operator">/</span>tmp/dir2/file1
<span class="token operator">-</span>rw-rw-r-<span class="token operator">-</span><span class="token punctuation">.</span> 1 user01 root 0 Mar 6 13:44 <span class="token operator">/</span>tmp/dir2/file1
</code></pre></div><h4 id="_3、粘滞位举例"><a href="#_3、粘滞位举例" class="header-anchor">#</a> 3、粘滞位举例</h4> <div class="language-powershell extra-class"><pre class="language-powershell"><code>需求：
在创建一个公共目录<span class="token operator">/</span>tmp/dir3<span class="token punctuation">,</span>要求所有人都可以在该公共目录里创建、删除文件；但是只能自己管理自己，不能删除别人
的文件

<span class="token namespace">[root@localhost ~]</span><span class="token comment"># mkdir /tmp/dir3</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># chmod 777 /tmp/dir3</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># chmod o+t /tmp/dir3</span>
或者一步到位：
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># chmod 1777 /tmp/dir3</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># ll -d /tmp/dir3</span>
drwxrwxrwt<span class="token punctuation">.</span> 2 root root 4096 Mar 6 13:52 <span class="token operator">/</span>tmp/dir3
测试验证：
自己完成
</code></pre></div><h3 id="三-总结"><a href="#三-总结" class="header-anchor">#</a> ㈢ 总结</h3> <ul><li><p>高级权限分类</p> <ul><li><p>冒险位——&gt;针对命令 s/S 4 chmod u+s 命令文件</p></li> <li><p>强制位——&gt;针对目录 s/S 2 chmod g+s 目录</p></li> <li><p>粘滞位——&gt;针对公共目录 t/T 1 chmod o+t 公共目录</p></li></ul></li> <li><p>高级权限设置</p></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>chmod 4xxx 文件名
chmod 2xxx 目录名
chmod 1777 公共目录
</code></pre></div><h2 id="默认权限-了解"><a href="#默认权限-了解" class="header-anchor">#</a> 默认权限(了解)</h2> <p>㈠ 什么是文件的默认权限</p> <p>所谓文件的默认权限(遮罩权限)，是指用户创建文件后，<font color="red">文件天生</font>就有的权限，不需要设置。</p> <p>㈡ 文件默认权限由谁控制</p> <p>文件默认权限由一个叫做**<font color="red">umask</font>**的东西来控制。</p> <p>㈢ <strong>umask</strong>如何控制文件默认权限</p> <h3 id="_1、临时控制"><a href="#_1、临时控制" class="header-anchor">#</a> 1、临时控制</h3> <ul><li><p>什么是临时控制？</p> <blockquote><p>临时控制，指的是用命令 umask 临时设置，只在当前终端当前进程中生效。</p></blockquote></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>查看当前用户的umask：
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># umask</span>
0022

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># su - user01</span>
<span class="token punctuation">[</span>user01@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">umask</span>
0002

注意：
<span class="token number">1</span>. 管理员和普通用户的umask不同，就表示管理员和普通用户创建的文件的默认权限不同！
<span class="token number">2</span>. 第1位数字表示高级权限；后面3位数字表示普通权限

普通用户：目录（775）,文件（664）
管理员： 目录（755），文件（644）
</code></pre></div><ul><li><p>如何临时设置用户的umask？</p> <p>写在前面：</p> <p>Linux系统中，默认创建目录的最大权限是<font color="red">0777</font>；文件的最大权限是<font color="red">0666</font></p></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token namespace">[root@localhost ~]</span><span class="token comment"># umask 0007 临时设置root用户的umask为0007</span>

问：umask=0007，那么在当前终端上root用户所创建目录和普通文件的权限分别是什么呢？
计算过程如下：
umask=文件的最大权限<span class="token operator">-</span>文件的默认权限

目录：
目录的默认权限=0777-umask=0777-0007=0770 rwxrwx-<span class="token operator">--</span>

普通文件：
文件的默认权限=0666-umask=0666-0007=0660 rw-rw-<span class="token operator">--</span><span class="token operator">-</span>



说明：
1<span class="token punctuation">.</span>权限用数字表示时没有负数，所以最小就是0
2<span class="token punctuation">.</span>默认权限规则遵循Linux系统中权限最小化原则

$ stu1 umask 0003
目录：0777-0003=0774 rwxrwxr-<span class="token operator">-</span>
文件：0666-0003=0663 rw-rw-<span class="token operator">-</span>wx 实际权限：rw-rw-r-<span class="token operator">-</span>
$ user01 umask 0005
文件：0666-0005=0661 rw-rw-<span class="token operator">--</span>x 实际权限:rw-rw-<span class="token operator">-</span>w-
</code></pre></div><h3 id="_2、永久控制"><a href="#_2、永久控制" class="header-anchor">#</a> 2、永久控制</h3> <ul><li><p>什么是永久设置？</p> <blockquote><p>永久设置，指的是通过修改配置文件设置，对用户的所有终端所有进程生效</p></blockquote></li> <li><p>修改哪个配置文件呢？</p> <ol><li>相关配置文件介绍</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token comment"># 全局配置文件（针对所有用户所有进程）</span>
<span class="token operator">/</span>etc/profile
系统和用户的环境变量信息，当用户第一次登录时<span class="token punctuation">,</span>该文件被读取
<span class="token operator">/</span>etc/bashrc
每个运行的bash信息（系统别名、函数及默认权限的定义），当bash被打开时<span class="token punctuation">,</span>该文件被读取


<span class="token comment"># 局部配置文件（针对某个特定用户以及用户的所有进程）</span>
~<span class="token operator">/</span><span class="token punctuation">.</span>bashrc
当前用户的bash信息，当用户登录和每次打开新的shell时该文件被读取
~<span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
当前用户的环境变量，当用户登录时，该文件被读取
~<span class="token operator">/</span><span class="token punctuation">.</span>bash_history
保存当前用户历史命令的文件
~<span class="token operator">/</span><span class="token punctuation">.</span>bash_logout
当用户退出bash或者终端时，会首先执行该文件里的代码，然后再退出
</code></pre></div><ol start="2"><li>如何永久设置用户的umask？</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>1<span class="token punctuation">.</span>针对所有用户生效
<span class="token comment"># vim /etc/bashrc</span>
在该文件的最后增加以下内容：
umask 0007
重新读取该配置文件让其立马生效
<span class="token comment"># source /etc/bashrc</span>
或者
<span class="token comment"># . /etc/bashrc</span>


2<span class="token punctuation">.</span>针对某个用户生效
比如，只针对user01用户生效
<span class="token namespace">[user01@localhost ~]</span>$ vim ~<span class="token operator">/</span><span class="token punctuation">.</span>bashrc
在该文件的最后增加以下内容：
umask 0007

总结：
1<span class="token punctuation">.</span> 配置文件，分为全局配置和局部配置
2<span class="token punctuation">.</span> 全局和局部配置冲突，一般情况下以局部配置为准；二般情况，看情况
</code></pre></div></li></ul> <h3 id="默认权限总结"><a href="#默认权限总结" class="header-anchor">#</a> 默认权限总结</h3> <ol><li><p>什么是文件的默认权限？</p> <ul><li>文件被（用户）创建出来后，天生自带的权限</li></ul></li> <li><p>文件的默认权限由谁来控制？</p> <ul><li><p>由umask的值来控制文件的默认权限</p></li> <li><p>umask值针对的<strong>用户</strong></p></li></ul></li> <li><p>如何去更改或设置用户的umask呢？</p> <p>1）临时设置</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>umask 007 只针对当前用户在当前终端生效
</code></pre></div><p>2）永久设置</p> <ul><li><p>针对所有人生效——&gt;/etc/bashrc（重新读取生效）</p></li> <li><p>针对某个人生效——&gt;~/.bashrc（重新读取生效）</p></li></ul></li></ol> <h2 id="acl"><a href="#acl" class="header-anchor">#</a> ACL</h2> <p><strong>㈠</strong> ACL能做什么</p> <ol><li>ACL访问控制策略可以作为前面所讲<font color="red">权限的补充</font>，<font color="red">更加细</font>的来控制文件的权限</li> <li>ACL策略可以<font color="red">只针对某个用户</font>在文件上有相应权限</li> <li>ACL策略也可以<font color="red">只针对多个用户或者一个组</font>里的所有用户在文件上有相应权限</li></ol> <p><img src="/assets/img/image-20240108141509867.3189577f.png" alt="image-20240108141509867"></p> <p>㈡ 如何设置文件的ACL策略</p> <h3 id="开启acl"><a href="#开启acl" class="header-anchor">#</a> 开启ACL</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># dumpe2fs -h /dev/sda3</span>
<span class="token comment">#dumpe2fs命令是查询指定分区详细文件系统信息的命令</span>
选项：
	<span class="token parameter variable">-h</span>	仅显示超级块中信息，而不显示磁盘块组的详细信息。
	
<span class="token punctuation">..</span>.省略部分输出<span class="token punctuation">..</span>.
Default <span class="token function">mount</span> options:	user_xattr acl
<span class="token punctuation">..</span>.省略部分输出<span class="token punctuation">..</span>.
</code></pre></div><p>如果没有开启，手工开启分区的ACL权限：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mount -o remount,acl /</span>
<span class="token comment"># 重新挂载根分区，并挂载加入acl权限</span>
</code></pre></div><p>也可以通过修改/etc/fstab文件，永久开启ACL权限：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/fstab</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>c2ca6f57-b15c-43ea-bca0-f239083d8bd2	/	ext4	defaults,acl	<span class="token number">1</span>	<span class="token number">1</span>
<span class="token comment"># 加入acl</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mount -o remount /</span>
<span class="token comment"># 重新挂载文件系统或重启动系统，使修改生效</span>
</code></pre></div><h3 id="acl基本命令"><a href="#acl基本命令" class="header-anchor">#</a> ACL基本命令</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>getfacl 文件名			 查询文件的ACL权限
setfacl 选项 文件名		设定ACL权限
	<span class="token parameter variable">-m</span>		设定ACL权限
	<span class="token parameter variable">-b</span>		删除ACL权限
	-x:用户  删除单个用户的ACL权限



setfacl <span class="token parameter variable">-m</span> u:用户名:权限 文件名
setfacl <span class="token parameter variable">-m</span> g:组名:权限 文件名

setfacl <span class="token parameter variable">-m</span> u:aa:rwx /test   给test目录赋予aa是读写执行的ACL权限
setfacl <span class="token parameter variable">-m</span> u:cc:rx <span class="token parameter variable">-R</span> soft/ 赋予递归ACL权限，只能赋予目录
	-R递归

setfacl <span class="token parameter variable">-m</span> d:u:aa:rwx <span class="token parameter variable">-R</span> /test	ACL默认权限。注意：默认权限只能赋予目录

注意：如果给目录赋予acl权限，两条命令都要输入
递归与默认的区别：
setfacl <span class="token parameter variable">-m</span> u:cc:rx <span class="token parameter variable">-R</span> soft/		只对已经存在的文件生效
setfacl <span class="token parameter variable">-m</span> d:u:aa:rwx <span class="token parameter variable">-R</span> /test	只对以后新建的文件生效
</code></pre></div><h3 id="最大有效权限mask"><a href="#最大有效权限mask" class="header-anchor">#</a> 最大有效权限mask</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># setfacl -m m:rx project/</span>
<span class="token comment">#设定mask权限为r-x。使用“m:权限”格式</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># getfacl project/</span>
<span class="token comment"># file: project/</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: tgroup</span>
user::rwx
group::rwx			<span class="token comment">#effective:r-x</span>
mask::r-x
<span class="token comment">#mask权限变为了r-x</span>
other::---
</code></pre></div><h3 id="删除acl权限"><a href="#删除acl权限" class="header-anchor">#</a> 删除ACL权限</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># setfacl -x u:st /project/</span>
<span class="token comment">#删除指定用户和用户组的ACL权限</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># setfacl -b project/</span>
<span class="token comment">#会删除文件的所有的ACL权限</span>
</code></pre></div><h3 id="设置acl策略-setfacl"><a href="#设置acl策略-setfacl" class="header-anchor">#</a> 设置ACL策略(setfacl)</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>常用选项：
<span class="token operator">-</span>m 修改或者设置ACL策略
<span class="token operator">-</span>R 递归授权，对目录下已存在的目录或文件有acl策略，但新建的文件没有
<span class="token operator">-</span>x 去掉某个用户或者某个组的ACL策略
<span class="token operator">-</span>b 删除所有的acl策略
<span class="token operator">-</span>d 默认ACL策略，只针对目录，该目录下新建的目录和文件都会继承acl策略
mask: 定义除其他人和所有者外的最大权限
</code></pre></div><p><font color="red"><strong>重点掌握：</strong></font></p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>setfacl <span class="token operator">-</span>m u:用户:rwx <span class="token operator">/</span>home/redhat/file1 给单个用户单独加权限
setfacl <span class="token operator">-</span>m g:组名:rwx <span class="token operator">/</span>home/redhat/file1 给单个组单独加权限

setfacl <span class="token operator">-</span>x u:用户 <span class="token operator">/</span>home/redhat/file1 去掉某个用户的权限
setfacl <span class="token operator">-</span>x g:组名 <span class="token operator">/</span>home/redhat/file1 去掉某个组的acl策略
setfacl <span class="token operator">-</span>b <span class="token operator">/</span>home/redhat/file1 删除文件上所有的acl策略
<span class="token comment"># setfacl -m u:user01:rw file1 针对于单个用户给可读可写权限</span>
<span class="token comment"># setfacl -m g:sysadmin:rw file1 针对于单个组给可读可写权限</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">==</span><span class="token operator">==</span>》准备工作《<span class="token operator">==</span><span class="token operator">==</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># touch file{1..3}</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># chmod 600 file*</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">0</span>
-rw------- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file1
-rw------- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw------- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># useradd user01</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># useradd user02</span>
</code></pre></div><blockquote><p>给单个用户、用户组 单独加权限</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -m u:user01:rw file1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># su user02</span>
<span class="token punctuation">[</span>user02@xiaoshaozi zstest<span class="token punctuation">]</span>$ <span class="token function">vim</span> file1
<span class="token punctuation">[</span>user02@xiaoshaozi zstest<span class="token punctuation">]</span>$ <span class="token function">cat</span> file1
cat: file1: 权限不够

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># su user01</span>
<span class="token punctuation">[</span>user01@xiaoshaozi zstest<span class="token punctuation">]</span>$ <span class="token function">vim</span> file1
<span class="token punctuation">[</span>user01@xiaoshaozi zstest<span class="token punctuation">]</span>$ <span class="token function">cat</span> file1
user01可以读写
<span class="token punctuation">[</span>user01@xiaoshaozi zstest<span class="token punctuation">]</span>$ getfacl file1
<span class="token comment"># file: file1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
user:user01:rw-
group::---
mask::rw-
other::---

<span class="token punctuation">[</span>user01@xiaoshaozi zstest<span class="token punctuation">]</span>$ getfacl file2
<span class="token comment"># file: file2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
other::---

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># groupadd usertest</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -m g:usertest:rw file2</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4</span>
-rw-rw----+ <span class="token number">1</span> root root <span class="token number">19</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:25 file1
-rw-rw----+ <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw-------  <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file2</span>
<span class="token comment"># file: file2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
group:usertest:rw-
mask::rw-
other::---
</code></pre></div><blockquote><p>单独删除ACL权限</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -x u:user01 file1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file1</span>
<span class="token comment"># file: file1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
mask::---
other::---
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4</span>
-rw-------+ <span class="token number">1</span> root root <span class="token number">19</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:25 file1
-rw-rw----+ <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw-------  <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -x m: file1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4</span>
-rw-------  <span class="token number">1</span> root root <span class="token number">19</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:25 file1
-rw-rw----+ <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw-------  <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3
</code></pre></div><blockquote><p>删除所有ACL权限</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file2</span>
<span class="token comment"># file: file2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
group:usertest:rw-
mask::rw-
other::---
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -b file2</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file2</span>
<span class="token comment"># file: file2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
other::---
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4</span>
-rw------- <span class="token number">1</span> root root <span class="token number">19</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:25 file1
-rw------- <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw------- <span class="token number">1</span> root root  <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3
</code></pre></div><blockquote><p>mask设置other的最大权限</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file1</span>
<span class="token comment"># file: file1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
other::---

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -m m::r file1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl file1</span>
<span class="token comment"># file: file1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
group::---
mask::r--
other::---
</code></pre></div><blockquote><p>目录递归授权</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># mkdir dir{1..2}</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">12</span>
drwxr-xr-x  <span class="token number">2</span> root root <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:37 dir1
drwxr-xr-x  <span class="token number">2</span> root root <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:37 dir2
-rw-r-----+ <span class="token number">1</span> root root   <span class="token number">19</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:25 file1
-rw-------  <span class="token number">1</span> root root    <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file2
-rw-------  <span class="token number">1</span> root root    <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:20 file3
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -Rm u:user01:rwx dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl dir1</span>
<span class="token comment"># file: dir1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rwx
user:user01:rwx
group::r-x
mask::rwx
other::r-x

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># cd dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># touch dir1_file{1..3}</span>
<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">0</span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file1
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file2
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file3
<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># cd ..</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -Rm u:user01:rwx dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># cd dir1</span>
<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">0</span>
-rw-rwxr--+ <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file1
-rw-rwxr--+ <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file2
-rw-rwxr--+ <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file3
<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># getfacl *</span>
<span class="token comment"># file: dir1_file1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
user:user01:rwx
group::r--
mask::rwx
other::r--

<span class="token comment"># file: dir1_file2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
user:user01:rwx
group::r--
mask::rwx
other::r--

<span class="token comment"># file: dir1_file3</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rw-
user:user01:rwx
group::r--
mask::rwx
other::r--


<span class="token punctuation">[</span>root@xiaoshaozi dir1<span class="token punctuation">]</span><span class="token comment"># su user01</span>
<span class="token punctuation">[</span>user01@xiaoshaozi dir1<span class="token punctuation">]</span>$ <span class="token function">touch</span> file1
<span class="token punctuation">[</span>user01@xiaoshaozi dir1<span class="token punctuation">]</span>$ <span class="token function">ls</span>
dir1_file1  dir1_file2  dir1_file3  file1
<span class="token punctuation">[</span>user01@xiaoshaozi dir1<span class="token punctuation">]</span>$ ll
总用量 <span class="token number">0</span>
-rw-rwxr--+ <span class="token number">1</span> root   root   <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file1
-rw-rwxr--+ <span class="token number">1</span> root   root   <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file2
-rw-rwxr--+ <span class="token number">1</span> root   root   <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:39 dir1_file3
-rw-rw-r--  <span class="token number">1</span> user01 user01 <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:44 file1
</code></pre></div><blockquote><p>新创建的文件授权</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -dm u:user01:rwx dir2</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl dir2</span>
<span class="token comment"># file: dir2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rwx
group::r-x
other::r-x
default:user::rwx
default:user:user01:rwx
default:group::r-x
default:mask::rwx
default:other::r-x

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># setfacl -m u:user01:rwx dir2</span>
<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># getfacl dir2</span>
<span class="token comment"># file: dir2</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rwx
user:user01:rwx
group::r-x
mask::rwx
other::r-x
default:user::rwx
default:user:user01:rwx
default:group::r-x
default:mask::rwx
default:other::r-x

<span class="token punctuation">[</span>root@xiaoshaozi zstest<span class="token punctuation">]</span><span class="token comment"># su user01</span>
<span class="token punctuation">[</span>user01@xiaoshaozi zstest<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> dir2
<span class="token punctuation">[</span>user01@xiaoshaozi dir2<span class="token punctuation">]</span>$ <span class="token function">touch</span> file1
<span class="token punctuation">[</span>user01@xiaoshaozi dir2<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> dir1
<span class="token punctuation">[</span>user01@xiaoshaozi dir2<span class="token punctuation">]</span>$ ll
总用量 <span class="token number">4</span>
drwxrwxr-x+ <span class="token number">2</span> user01 user01 <span class="token number">4096</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:48 dir1
-rw-rw-r--+ <span class="token number">1</span> user01 user01    <span class="token number">0</span> <span class="token number">1</span>月   <span class="token number">5</span> <span class="token number">10</span>:48 file1

<span class="token punctuation">[</span>user01@xiaoshaozi dir2<span class="token punctuation">]</span>$ getfacl dir1 file1
<span class="token comment"># file: dir1</span>
<span class="token comment"># owner: user01</span>
<span class="token comment"># group: user01</span>
user::rwx
user:user01:rwx
group::r-x
mask::rwx
other::r-x
default:user::rwx
default:user:user01:rwx
default:group::r-x
default:mask::rwx
default:other::r-x

<span class="token comment"># file: file1</span>
<span class="token comment"># owner: user01</span>
<span class="token comment"># group: user01</span>
user::rw-
user:user01:rwx                 <span class="token comment">#effective:rw-</span>
group::r-x                      <span class="token comment">#effective:r--</span>
mask::rw-
other::r--

</code></pre></div><h3 id="查看acl策略-getfacl"><a href="#查看acl策略-getfacl" class="header-anchor">#</a> 查看ACL策略(getfacl)</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token comment"># getfacl 文件名</span>
</code></pre></div><h2 id="chattr"><a href="#chattr" class="header-anchor">#</a> chattr</h2> <blockquote><p>文件系统属性chattr权限</p></blockquote> <p>1、命令格式</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#chattr [+-=] [选项]文件或目录名</span>
选项：
	+:	增加权限
	-:	删除权限
	<span class="token operator">=</span>:	等于某权限
	i:	对文件，不允许对文件进行删除、改名，也不能添加和修改数据；
		对目录，只能修改目录下文件的数据，但不允许建立和删除文件。
	a:	对文件，只能在文件中增加数据，但是不能删除也不能修改数据；
		对目录，只允许在目录中建立和修改文件，但是不允许删除
	e:	Linux中绝大多数的文件都默认拥有e属性。
		表示该文件是使用ext文件系统进行存储的，而且不能使用“chattr -e”命令取消e属性。
</code></pre></div><p>2、查看文件系统属性lsattr</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># lsattr 选项 文件名</span>
选项：
	<span class="token parameter variable">-a</span>	显示所有文件和目录
	<span class="token parameter variable">-d</span>	若目标是目录，仅列出目录本身的属性，而不是子文件的
</code></pre></div><p>3、举例</p> <div class="language-shell extra-class"><pre class="language-shell"><code>例1：
<span class="token comment">#给文件赋予i属性</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># touch ftest</span>
<span class="token comment">#建立测试文件</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chattr +i ftest</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rm -rf ftest</span>
rm:无法删除<span class="token string">&quot;ftest&quot;</span>:不允许的操作
<span class="token comment">#赋予i属性后，root也不能删除</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo 111 &gt;&gt; ftes</span>
-bash: ftest: 权限不够
<span class="token comment">#也不能修改文件的数据</span>


<span class="token comment">#给目录赋予i属性</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir dtest</span>
<span class="token comment">#建立测试目录</span>
<span class="token punctuation">[</span>root@localhost dtest<span class="token punctuation">]</span><span class="token comment"># touch dtest/abc</span>
<span class="token comment">#再建立一个测试文件abc</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chattr +i dtest/</span>
<span class="token comment">#给目录赋予i属性</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd dtest/</span>
<span class="token punctuation">[</span>root@localhost dtest<span class="token punctuation">]</span><span class="token comment"># touch bcd</span>
touch:无法创建<span class="token string">&quot;bcd&quot;</span>:权限不够
<span class="token comment">#dtest目录不能新建文件</span>
<span class="token punctuation">[</span>root@localhost dtest<span class="token punctuation">]</span><span class="token comment"># echo 11 &gt;&gt; abc</span>
<span class="token punctuation">[</span>root@localhost dtest<span class="token punctuation">]</span><span class="token comment"># cat abc</span>
<span class="token number">11</span>
<span class="token comment">#但是可以修改文件内容</span>
<span class="token punctuation">[</span>root@localhost dtest<span class="token punctuation">]</span><span class="token comment"># rm -rf abc</span>
rm:无法删除<span class="token string">&quot;abc&quot;</span>:权限不够
<span class="token comment">#不能删除</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>例2：
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /back/log</span>
<span class="token comment">#建立备份目录</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chattr +a /back/log/</span>
<span class="token comment">#赋予a属性</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cp /var/log/messages /back/log/</span>
<span class="token comment">#可以复制文件和新建文件到指定目录</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rm -rf /back/log/messages</span>
rm:无法删除<span class="token string">&quot;/back/log/messages&quot;</span>:不允许的操作
<span class="token comment">#但是不允许删除</span>
</code></pre></div><h1 id="课后实战"><a href="#课后实战" class="header-anchor">#</a> 课后实战</h1> <h2 id="作业1"><a href="#作业1" class="header-anchor">#</a> 作业1</h2> <ol><li><p>root用户新建目录 /tmp/dir1，要求目录的所属组是tom</p></li> <li><p>创建tom用户，tom用户是否允许在/tmp/dir1下建立文件tomfile？如果不允许，如何让tom用户在/tmp/dir1目录里创建文件tomfile?</p></li> <li><p>用户jack如果想修改tom用户创建的tomfile文件，怎么做？</p></li></ol> <h2 id="作业2"><a href="#作业2" class="header-anchor">#</a> 作业2</h2> <p>以普通用户user01身份登录，新建公共目录/shared/sysadmin并且属于sysadmin组</p> <ol><li><p>要求组成员有读写访问的权限，其他成员没有任何权限；</p></li> <li><p>要求任何人在/shared/sysadmin面创建的文件全部属于sysadmin组</p></li> <li><p>要求harry可写，natasha不能读写</p></li> <li><p>要求该目录下的文件只有root和文件创建者可以删，其他人不能删除别人的文件</p></li></ol> <h2 id="综合练习"><a href="#综合练习" class="header-anchor">#</a> 综合练习</h2> <ol><li><p>使用普通用户stu1登录系统，并在/u01/STU1目录下创建一个文件zhangsan，内容为：我是某某某，我要努力学习！我一定能行的！加油！（I am jack, I want to study hard,I can do it,come on）</p></li> <li><p>使用stu2用户登录系统，并修改stu1用户刚刚创建的文件zhangsan，增加内容：我要和你挑战（I want to challenge you）！并在相同的目录下创建一个自己的文件lisi，内容同上</p></li> <li><p>stu3用户同时可以查看stu1和stu2两个用户的文件，但是不能做任何修改</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2024年1月8日星期一下午2点46分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zs-use/linux/基本使用/命令--7.1.文件权限（普通）.html" class="prev">
        命令--7.1.文件权限(普通)
      </a></span> <span class="next"><a href="/zs-use/linux/基本使用/命令--8.网络配置.html">
        命令--8.网络配置
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.84fe6af9.js" defer></script><script src="/assets/js/2.57cc69f3.js" defer></script><script src="/assets/js/1.2250ab76.js" defer></script><script src="/assets/js/139.b931f69a.js" defer></script><script src="/assets/js/95.dbf66513.js" defer></script>
  </body>
</html>
