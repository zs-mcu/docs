(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{1517:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h4",{attrs:{id:"ssh-三步解决免密登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh-三步解决免密登录"}},[s._v("#")]),s._v(" SSH 三步解决免密登录")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"about:blank#1_2"}},[s._v("1.客户端生成公私钥")])]),s._v(" "),t("li",[t("a",{attrs:{href:"about:blank#2_25"}},[s._v("2.上传公钥到服务器")])]),s._v(" "),t("li",[t("a",{attrs:{href:"about:blank#3_46"}},[s._v("3.测试免密登录")])])]),s._v(" "),t("h2",{attrs:{id:"_1-客户端生成公私钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-客户端生成公私钥"}},[s._v("#")]),s._v(" 1.客户端生成公私钥")]),s._v(" "),t("p",[s._v("本地客户端生成公私钥：（一路回车默认即可）")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-keygen\n")])])]),t("p",[s._v("上面这个命令会在用户目录.ssh文件夹下创建公私钥")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd ~/.ssh\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ls\n")])])]),t("p",[s._v("下创建两个密钥：")]),s._v(" "),t("ol",[t("li",[s._v("id_rsa （私钥）")]),s._v(" "),t("li",[s._v("id_rsa.pub (公钥)")])]),s._v(" "),t("h2",{attrs:{id:"_2-上传公钥到服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-上传公钥到服务器"}},[s._v("#")]),s._v(" 2.上传公钥到服务器")]),s._v(" "),t("p",[s._v("上传公钥到服务器")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.1.101 -p 10022\n")])])]),t("p",[s._v("上面这条命令是写到服务器上的ssh目录下去了")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd ~/.ssh\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim authorized_keys\n")])])]),t("p",[s._v("可以看到客户端写入到服务器的 id_rsa.pub （公钥）内容。")]),s._v(" "),t("h2",{attrs:{id:"_3-测试免密登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-测试免密登录"}},[s._v("#")]),s._v(" 3.测试免密登录")]),s._v(" "),t("p",[s._v("客户端通过ssh连接远程服务器，就可以免密登录了。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh root@192.168.1.101 -p 10022\n")])])]),t("h2",{attrs:{id:"_4-上传文件到服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-上传文件到服务器"}},[s._v("#")]),s._v(" 4.上传文件到服务器")]),s._v(" "),t("p",[s._v("使用scp命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10022")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist"')]),s._v(" xiaoshaozi@192.168.1.101:/home/xiaoshaozi/workspace\n")])])]),t("h2",{attrs:{id:"常见错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[s._v("#")]),s._v(" 常见错误")]),s._v(" "),t("h3",{attrs:{id:"无法上传秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无法上传秘钥"}},[s._v("#")]),s._v(" 无法上传秘钥")]),s._v(" "),t("blockquote",[t("p",[s._v("上传报错")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("miyufeng@MacBook-Pro .ssh % ssh-copy-id "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/linux_106_rsa_ssh.pub root@106.14.41.60\n/usr/bin/ssh-copy-id: INFO: Source of key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to be installed: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/miyufeng/.ssh/linux_106_rsa_ssh.pub"')]),s._v("\n/usr/bin/ssh-copy-id: INFO: attempting to log "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" with the new key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", to filter out any that are already installed\n\n/usr/bin/ssh-copy-id: ERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nERROR: @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("     @\nERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nERROR: IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nERROR: Someone could be eavesdropping on you right now "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("man-in-the-middle attack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nERROR: It is also possible that a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key has just been changed.\nERROR: The fingerprint "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the ECDSA key sent by the remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" is\nERROR: SHA256:kXtnmnqUFcE/btiDu5sFkCInUpwU2dgLTPyuyBtxUsw.\nERROR: Please contact your system administrator.\nERROR: Add correct "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/miyufeng/.ssh/known_hosts to get rid of this message.\nERROR: Offending ECDSA key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/miyufeng/.ssh/known_hosts:1\nERROR: ECDSA "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("106.14")]),s._v(".41.60 has changed and you have requested strict checking.\nERROR: Host key verification failed.\n\nmiyufeng@MacBook-Pro .ssh % ssh-copy-id "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/linux_106_rsa_ssh.pub root@106.14.41.60 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n/usr/bin/ssh-copy-id: INFO: Source of key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to be installed: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/miyufeng/.ssh/linux_106_rsa_ssh.pub"')]),s._v("\n/usr/bin/ssh-copy-id: INFO: attempting to log "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" with the new key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", to filter out any that are already installed\n\n/usr/bin/ssh-copy-id: ERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nERROR: @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("     @\nERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nERROR: IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nERROR: Someone could be eavesdropping on you right now "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("man-in-the-middle attack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nERROR: It is also possible that a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key has just been changed.\nERROR: The fingerprint "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the ECDSA key sent by the remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" is\nERROR: SHA256:kXtnmnqUFcE/btiDu5sFkCInUpwU2dgLTPyuyBtxUsw.\nERROR: Please contact your system administrator.\nERROR: Add correct "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/miyufeng/.ssh/known_hosts to get rid of this message.\nERROR: Offending ECDSA key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/miyufeng/.ssh/known_hosts:1\nERROR: ECDSA "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("106.14")]),s._v(".41.60 has changed and you have requested strict checking.\nERROR: Host key verification failed.\n")])])]),t("p",[t("strong",[s._v("解决方法一：")]),s._v(" 清除本地"),t("a",{attrs:{href:"https://www.lsjlt.com/tag/%E7%BC%93%E5%AD%98/",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[s._v("缓存")]),t("OutboundLink")],1),s._v("证书")]),s._v(" "),t("p",[s._v("执行  "),t("code",[s._v("ssh-keygen -R IP地址")])]),s._v(" "),t("p",[s._v("**解决方法二：**在.ssh/known_hosts中删除对应ip")]),s._v(" "),t("p",[s._v("执行vi .ssh/known_hosts 找到并删除")])])}),[],!1,null,null,null);t.default=n.exports}}]);