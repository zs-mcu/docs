(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1033:function(t,s,a){t.exports=a.p+"assets/img/image-20240108141509867.3189577f.png"},1405:function(t,s,a){"use strict";a.r(s);var n=a(4),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"命令-7-2-文件权限-高级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令-7-2-文件权限-高级"}},[t._v("#")]),t._v(" 命令--7.2.文件权限（高级）")]),t._v(" "),s("p",[t._v("李大毛：file1——>属主和属组是李大毛")]),t._v(" "),s("p",[t._v("王二狗：使用"),s("font",{attrs:{color:"red"}},[t._v("vim编辑器")]),t._v("修改李大毛的文件file1")],1),t._v(" "),s("h2",{attrs:{id:"_1、冒险位-setuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、冒险位-setuid"}},[t._v("#")]),t._v(" 1、冒险位(SETUID)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("冒险位，指文件操作者(用户)"),s("font",{attrs:{color:"red"}},[t._v("临时拥有")]),t._v("文件"),s("font",{attrs:{color:"red"}},[t._v("拥有者")]),t._v("的权限")],1)]),t._v(" "),s("li",[s("p",[t._v("冒险位，一般针对的是"),s("font",{attrs:{color:"red"}},[t._v("命令")]),t._v("或者"),s("font",{attrs:{color:"red"}},[t._v("脚本文件")])],1)]),t._v(" "),s("li",[s("p",[t._v("冒险位，用字母表示是"),s("font",{attrs:{color:"red"}},[t._v("s或S")]),t._v("；数字表示是"),s("font",{attrs:{color:"red"}},[t._v("4")])],1)]),t._v(" "),s("li",[s("p",[t._v("冒险位的设置："),s("code",[t._v("chmod u+s 文件名")]),t._v(" 或者 "),s("code",[t._v("chmod 4xxx 文件名")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /usr/bin/vim")]),t._v("\n-rwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2294216")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("月  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" /usr/bin/vim\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod u+s /usr/bin/vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /usr/bin/vim")]),t._v("\n-rwsr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2294216")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("月  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" /usr/bin/vim\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 0755 /usr/bin/vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /usr/bin/vim")]),t._v("\n-rwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2294216")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("月  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" /usr/bin/vim\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_2、强制位-setgid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、强制位-setgid"}},[t._v("#")]),t._v(" 2、强制位(SETGID)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("强制位，一般针对的是"),s("font",{attrs:{color:"red"}},[t._v("目录")])],1),t._v(" "),s("p",[t._v("如果一个目录拥有强制位，那么"),s("font",{attrs:{color:"red"}},[t._v("任何用户")]),t._v("在该目录里所创建的任何文件的"),s("font",{attrs:{color:"red"}},[t._v("属组")]),t._v("都会继承"),s("font",{attrs:{color:"red"}},[t._v("该目录的属组")]),t._v("。/dir1----\x3eadmin yunwei---\x3e/dir1/file1")],1)]),t._v(" "),s("li",[s("p",[t._v("强制位，用字母表示是"),s("font",{attrs:{color:"red"}},[t._v("s或S")]),t._v("；数字表示是"),s("font",{attrs:{color:"red"}},[t._v("2")])],1)]),t._v(" "),s("li",[s("p",[t._v("强制位的设置： "),s("code",[t._v("chmod g+s 文件名")]),t._v(" 或者 "),s("code",[t._v("chmod 2xxx 文件名")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 2755 dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\ndrwxr-sr-x+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":44 dir1\n\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod g-s dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\ndrwxr-xr-x+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":44 dir1\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_3、粘滞位-sticky"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、粘滞位-sticky"}},[t._v("#")]),t._v(" 3、粘滞位(STICKY)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("粘滞位，一般针对的是"),s("font",{attrs:{color:"red"}},[t._v("公共目录")])],1),t._v(" "),s("p",[t._v("如果一个公共目录拥有粘滞位，那么该目录下的文件，只有"),s("font",{attrs:{color:"red"}},[t._v("root")]),t._v("和"),s("font",{attrs:{color:"red"}},[t._v("文件的创建")]),t._v("者可以删除，其他人只能自己管理自己。（A用户不能删除B用户创建的文件）")],1),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[t._v("控制删除！")]),t._v("针对公共目录——》任何人都可以使用")],1)]),t._v(" "),s("li",[s("p",[t._v("粘滞位，用字母表示是"),s("font",{attrs:{color:"red"}},[t._v("t或T")]),t._v("；数字表示是"),s("font",{attrs:{color:"red"}},[t._v("1")])],1)]),t._v(" "),s("li",[s("p",[t._v("粘滞位的设置： "),s("code",[t._v("chmod o+t 文件名")]),t._v(" 或者 "),s("code",[t._v("chmod 1xxx 文件名")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll -d /tmp/")]),t._v("\ndrwxrwxrwt. "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":27 /tmp/\n\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"二-高级权限设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-高级权限设置"}},[t._v("#")]),t._v(" ㈡ 高级权限设置")]),t._v(" "),s("h4",{attrs:{id:"_1、冒险位举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、冒险位举例"}},[t._v("#")]),t._v(" 1、冒险位举例")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("需求：\n给一个vim命令设置冒险位，目的是任何人拿vim去修改文件可以临时获得文件拥有者的权限\n\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# which vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr/bin/vim\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /usr/bin/vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rwxr-xr-x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 1 root root 2324712 Dec 22 2016 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr/bin/vim\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod u+s /usr/bin/vim")]),t._v("\n或者\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 4755 /usr/bin/vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /usr/bin/vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rwsr-xr-x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 1 root root 2324712 Dec 22 2016 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr/bin/vim\n测试验证，普通用户使用vim修改一个本没有权限修改的文件：\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll /etc/passwd")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rw-r-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("r-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 1 root root 1650 Mar 5 20:39 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/passwd\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su - user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[user01@localhost ~]")]),t._v("$ vim "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/passwd\n验证是否可以修改成功，如果可以，说明user01用户临时拥有了"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/passwd文件拥有者的权限\n")])])]),s("h4",{attrs:{id:"_2、强制位举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、强制位举例"}},[t._v("#")]),t._v(" 2、强制位举例")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("需求：\n给目录dir2设置一个强制位，测试是否任何人在该目录里创建的文件属组都是该目录的属组\n\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll -d dir2")]),t._v("\ndrwxr-xr-x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 2 root root 4096 Mar 6 13:42 dir2\n给dir2增加强制位：\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod g+s dir2")]),t._v("\n给dir2目录设置权限，让其他人可以写\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod o+w dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll -d dir2")]),t._v("\ndrwxr-srwx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 2 root root 4096 Mar 6 13:42 dir2\n测试普通用户user01在dir2目录里创建文件的属组是否是dir2的属组\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@heima tmp]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su - user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[user01@localhost ~]")]),t._v("$ touch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp/dir2/file1\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[user01@localhost ~]")]),t._v("$ ll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp/dir2/file1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rw-rw-r-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 1 user01 root 0 Mar 6 13:44 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp/dir2/file1\n")])])]),s("h4",{attrs:{id:"_3、粘滞位举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、粘滞位举例"}},[t._v("#")]),t._v(" 3、粘滞位举例")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("需求：\n在创建一个公共目录"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp/dir3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("要求所有人都可以在该公共目录里创建、删除文件；但是只能自己管理自己，不能删除别人\n的文件\n\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir /tmp/dir3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 777 /tmp/dir3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod o+t /tmp/dir3")]),t._v("\n或者一步到位：\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 1777 /tmp/dir3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll -d /tmp/dir3")]),t._v("\ndrwxrwxrwt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 2 root root 4096 Mar 6 13:52 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp/dir3\n测试验证：\n自己完成\n")])])]),s("h3",{attrs:{id:"三-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-总结"}},[t._v("#")]),t._v(" ㈢ 总结")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("高级权限分类")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("冒险位——>针对命令 s/S 4 chmod u+s 命令文件")])]),t._v(" "),s("li",[s("p",[t._v("强制位——>针对目录 s/S 2 chmod g+s 目录")])]),t._v(" "),s("li",[s("p",[t._v("粘滞位——>针对公共目录 t/T 1 chmod o+t 公共目录")])])])]),t._v(" "),s("li",[s("p",[t._v("高级权限设置")])])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("chmod 4xxx 文件名\nchmod 2xxx 目录名\nchmod 1777 公共目录\n")])])]),s("h2",{attrs:{id:"默认权限-了解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认权限-了解"}},[t._v("#")]),t._v(" 默认权限(了解)")]),t._v(" "),s("p",[t._v("㈠ 什么是文件的默认权限")]),t._v(" "),s("p",[t._v("所谓文件的默认权限(遮罩权限)，是指用户创建文件后，"),s("font",{attrs:{color:"red"}},[t._v("文件天生")]),t._v("就有的权限，不需要设置。")],1),t._v(" "),s("p",[t._v("㈡ 文件默认权限由谁控制")]),t._v(" "),s("p",[t._v("文件默认权限由一个叫做**"),s("font",{attrs:{color:"red"}},[t._v("umask")]),t._v("**的东西来控制。")],1),t._v(" "),s("p",[t._v("㈢ "),s("strong",[t._v("umask")]),t._v("如何控制文件默认权限")]),t._v(" "),s("h3",{attrs:{id:"_1、临时控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、临时控制"}},[t._v("#")]),t._v(" 1、临时控制")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("什么是临时控制？")]),t._v(" "),s("blockquote",[s("p",[t._v("临时控制，指的是用命令 umask 临时设置，只在当前终端当前进程中生效。")])])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("查看当前用户的umask：\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# umask")]),t._v("\n0022\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su - user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("umask")]),t._v("\n0002\n\n注意：\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". 管理员和普通用户的umask不同，就表示管理员和普通用户创建的文件的默认权限不同！\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(". 第1位数字表示高级权限；后面3位数字表示普通权限\n\n普通用户：目录（775）,文件（664）\n管理员： 目录（755），文件（644）\n")])])]),s("ul",[s("li",[s("p",[t._v("如何临时设置用户的umask？")]),t._v(" "),s("p",[t._v("写在前面：")]),t._v(" "),s("p",[t._v("Linux系统中，默认创建目录的最大权限是"),s("font",{attrs:{color:"red"}},[t._v("0777")]),t._v("；文件的最大权限是"),s("font",{attrs:{color:"red"}},[t._v("0666")])],1)])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[root@localhost ~]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# umask 0007 临时设置root用户的umask为0007")]),t._v("\n\n问：umask=0007，那么在当前终端上root用户所创建目录和普通文件的权限分别是什么呢？\n计算过程如下：\numask=文件的最大权限"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("文件的默认权限\n\n目录：\n目录的默认权限=0777-umask=0777-0007=0770 rwxrwx-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n\n普通文件：\n文件的默认权限=0666-umask=0666-0007=0660 rw-rw-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n\n\n\n说明：\n1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("权限用数字表示时没有负数，所以最小就是0\n2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("默认权限规则遵循Linux系统中权限最小化原则\n\n$ stu1 umask 0003\n目录：0777-0003=0774 rwxrwxr-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n文件：0666-0003=0663 rw-rw-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("wx 实际权限：rw-rw-r-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n$ user01 umask 0005\n文件：0666-0005=0661 rw-rw-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("x 实际权限:rw-rw-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("w-\n")])])]),s("h3",{attrs:{id:"_2、永久控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、永久控制"}},[t._v("#")]),t._v(" 2、永久控制")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("什么是永久设置？")]),t._v(" "),s("blockquote",[s("p",[t._v("永久设置，指的是通过修改配置文件设置，对用户的所有终端所有进程生效")])])]),t._v(" "),s("li",[s("p",[t._v("修改哪个配置文件呢？")]),t._v(" "),s("ol",[s("li",[t._v("相关配置文件介绍")])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局配置文件（针对所有用户所有进程）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/profile\n系统和用户的环境变量信息，当用户第一次登录时"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("该文件被读取\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/bashrc\n每个运行的bash信息（系统别名、函数及默认权限的定义），当bash被打开时"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("该文件被读取\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 局部配置文件（针对某个特定用户以及用户的所有进程）")]),t._v("\n~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bashrc\n当前用户的bash信息，当用户登录和每次打开新的shell时该文件被读取\n~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bash_profile\n当前用户的环境变量，当用户登录时，该文件被读取\n~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bash_history\n保存当前用户历史命令的文件\n~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bash_logout\n当用户退出bash或者终端时，会首先执行该文件里的代码，然后再退出\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("如何永久设置用户的umask？")])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("针对所有用户生效\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim /etc/bashrc")]),t._v("\n在该文件的最后增加以下内容：\numask 0007\n重新读取该配置文件让其立马生效\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# source /etc/bashrc")]),t._v("\n或者\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# . /etc/bashrc")]),t._v("\n\n\n2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("针对某个用户生效\n比如，只针对user01用户生效\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[user01@localhost ~]")]),t._v("$ vim ~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bashrc\n在该文件的最后增加以下内容：\numask 0007\n\n总结：\n1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 配置文件，分为全局配置和局部配置\n2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 全局和局部配置冲突，一般情况下以局部配置为准；二般情况，看情况\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"默认权限总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认权限总结"}},[t._v("#")]),t._v(" 默认权限总结")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("什么是文件的默认权限？")]),t._v(" "),s("ul",[s("li",[t._v("文件被（用户）创建出来后，天生自带的权限")])])]),t._v(" "),s("li",[s("p",[t._v("文件的默认权限由谁来控制？")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("由umask的值来控制文件的默认权限")])]),t._v(" "),s("li",[s("p",[t._v("umask值针对的"),s("strong",[t._v("用户")])])])])]),t._v(" "),s("li",[s("p",[t._v("如何去更改或设置用户的umask呢？")]),t._v(" "),s("p",[t._v("1）临时设置")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("umask 007 只针对当前用户在当前终端生效\n")])])]),s("p",[t._v("2）永久设置")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("针对所有人生效——>/etc/bashrc（重新读取生效）")])]),t._v(" "),s("li",[s("p",[t._v("针对某个人生效——>~/.bashrc（重新读取生效）")])])])])]),t._v(" "),s("h2",{attrs:{id:"acl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acl"}},[t._v("#")]),t._v(" ACL")]),t._v(" "),s("p",[s("strong",[t._v("㈠")]),t._v(" ACL能做什么")]),t._v(" "),s("ol",[s("li",[t._v("ACL访问控制策略可以作为前面所讲"),s("font",{attrs:{color:"red"}},[t._v("权限的补充")]),t._v("，"),s("font",{attrs:{color:"red"}},[t._v("更加细")]),t._v("的来控制文件的权限")],1),t._v(" "),s("li",[t._v("ACL策略可以"),s("font",{attrs:{color:"red"}},[t._v("只针对某个用户")]),t._v("在文件上有相应权限")],1),t._v(" "),s("li",[t._v("ACL策略也可以"),s("font",{attrs:{color:"red"}},[t._v("只针对多个用户或者一个组")]),t._v("里的所有用户在文件上有相应权限")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:a(1033),alt:"image-20240108141509867"}})]),t._v(" "),s("p",[t._v("㈡ 如何设置文件的ACL策略")]),t._v(" "),s("h3",{attrs:{id:"开启acl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启acl"}},[t._v("#")]),t._v(" 开启ACL")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# dumpe2fs -h /dev/sda3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#dumpe2fs命令是查询指定分区详细文件系统信息的命令")]),t._v("\n选项：\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v("\t仅显示超级块中信息，而不显示磁盘块组的详细信息。\n\t\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".省略部分输出"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nDefault "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" options:\tuser_xattr acl\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".省略部分输出"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("p",[t._v("如果没有开启，手工开启分区的ACL权限：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mount -o remount,acl /")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新挂载根分区，并挂载加入acl权限")]),t._v("\n")])])]),s("p",[t._v("也可以通过修改/etc/fstab文件，永久开启ACL权限：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi /etc/fstab")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("UUID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("c2ca6f57-b15c-43ea-bca0-f239083d8bd2\t/\text4\tdefaults,acl\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加入acl")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mount -o remount /")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新挂载文件系统或重启动系统，使修改生效")]),t._v("\n")])])]),s("h3",{attrs:{id:"acl基本命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acl基本命令"}},[t._v("#")]),t._v(" ACL基本命令")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("getfacl 文件名\t\t\t 查询文件的ACL权限\nsetfacl 选项 文件名\t\t设定ACL权限\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v("\t\t设定ACL权限\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v("\t\t删除ACL权限\n\t-x:用户  删除单个用户的ACL权限\n\n\n\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" u:用户名:权限 文件名\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" g:组名:权限 文件名\n\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" u:aa:rwx /test   给test目录赋予aa是读写执行的ACL权限\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" u:cc:rx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-R")]),t._v(" soft/ 赋予递归ACL权限，只能赋予目录\n\t-R递归\n\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" d:u:aa:rwx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-R")]),t._v(" /test\tACL默认权限。注意：默认权限只能赋予目录\n\n注意：如果给目录赋予acl权限，两条命令都要输入\n递归与默认的区别：\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" u:cc:rx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-R")]),t._v(" soft/\t\t只对已经存在的文件生效\nsetfacl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" d:u:aa:rwx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-R")]),t._v(" /test\t只对以后新建的文件生效\n")])])]),s("h3",{attrs:{id:"最大有效权限mask"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最大有效权限mask"}},[t._v("#")]),t._v(" 最大有效权限mask")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m m:rx project/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设定mask权限为r-x。使用“m:权限”格式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl project/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: project/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: tgroup")]),t._v("\nuser::rwx\ngroup::rwx\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#effective:r-x")]),t._v("\nmask::r-x\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#mask权限变为了r-x")]),t._v("\nother::---\n")])])]),s("h3",{attrs:{id:"删除acl权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除acl权限"}},[t._v("#")]),t._v(" 删除ACL权限")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -x u:st /project/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除指定用户和用户组的ACL权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -b project/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#会删除文件的所有的ACL权限")]),t._v("\n")])])]),s("h3",{attrs:{id:"设置acl策略-setfacl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置acl策略-setfacl"}},[t._v("#")]),t._v(" 设置ACL策略(setfacl)")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("常用选项：\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("m 修改或者设置ACL策略\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("R 递归授权，对目录下已存在的目录或文件有acl策略，但新建的文件没有\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x 去掉某个用户或者某个组的ACL策略\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("b 删除所有的acl策略\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d 默认ACL策略，只针对目录，该目录下新建的目录和文件都会继承acl策略\nmask: 定义除其他人和所有者外的最大权限\n")])])]),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("重点掌握：")])])],1),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("setfacl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("m u:用户:rwx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/redhat/file1 给单个用户单独加权限\nsetfacl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("m g:组名:rwx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/redhat/file1 给单个组单独加权限\n\nsetfacl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x u:用户 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/redhat/file1 去掉某个用户的权限\nsetfacl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x g:组名 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/redhat/file1 去掉某个组的acl策略\nsetfacl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/redhat/file1 删除文件上所有的acl策略\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m u:user01:rw file1 针对于单个用户给可读可写权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m g:sysadmin:rw file1 针对于单个组给可读可写权限")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v("》准备工作《"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch file{1..3}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 600 file*")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file1\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# useradd user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# useradd user02")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("给单个用户、用户组 单独加权限")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m u:user01:rw file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su user02")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user02@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" file1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user02@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" file1\ncat: file1: 权限不够\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" file1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" file1\nuser01可以读写\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ getfacl file1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\nuser:user01:rw-\ngroup::---\nmask::rw-\nother::---\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ getfacl file2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\nother::---\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# groupadd usertest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m g:usertest:rw file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n-rw-rw----+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 file1\n-rw-rw----+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\ngroup:usertest:rw-\nmask::rw-\nother::---\n")])])]),s("blockquote",[s("p",[t._v("单独删除ACL权限")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -x u:user01 file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\nmask::---\nother::---\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n-rw-------+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 file1\n-rw-rw----+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -x m: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 file1\n-rw-rw----+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n")])])]),s("blockquote",[s("p",[t._v("删除所有ACL权限")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\ngroup:usertest:rw-\nmask::rw-\nother::---\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -b file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\nother::---\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 file1\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw------- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n")])])]),s("blockquote",[s("p",[t._v("mask设置other的最大权限")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\nother::---\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m m::r file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\ngroup::---\nmask::r--\nother::---\n")])])]),s("blockquote",[s("p",[t._v("目录递归授权")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir dir{1..2}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\ndrwxr-xr-x  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":37 dir1\ndrwxr-xr-x  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":37 dir2\n-rw-r-----+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 file1\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file2\n-rw-------  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20 file3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -Rm u:user01:rwx dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rwx\nuser:user01:rwx\ngroup::r-x\nmask::rwx\nother::r-x\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch dir1_file{1..3}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file1\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file2\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd ..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -Rm u:user01:rwx dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file1\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file2\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl *")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir1_file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\nuser:user01:rwx\ngroup::r--\nmask::rwx\nother::r--\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir1_file2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\nuser:user01:rwx\ngroup::r--\nmask::rwx\nother::r--\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir1_file3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rw-\nuser:user01:rwx\ngroup::r--\nmask::rwx\nother::r--\n\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" file1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\ndir1_file1  dir1_file2  dir1_file3  file1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ ll\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root   root   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file1\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root   root   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file2\n-rw-rwxr--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root   root   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":39 dir1_file3\n-rw-rw-r--  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" user01 user01 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":44 file1\n")])])]),s("blockquote",[s("p",[t._v("新创建的文件授权")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -dm u:user01:rwx dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rwx\ngroup::r-x\nother::r-x\ndefault:user::rwx\ndefault:user:user01:rwx\ndefault:group::r-x\ndefault:mask::rwx\ndefault:other::r-x\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setfacl -m u:user01:rwx dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: root")]),t._v("\nuser::rwx\nuser:user01:rwx\ngroup::r-x\nmask::rwx\nother::r-x\ndefault:user::rwx\ndefault:user:user01:rwx\ndefault:group::r-x\ndefault:mask::rwx\ndefault:other::r-x\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# su user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi zstest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" dir2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" file1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" dir1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ ll\n总用量 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\ndrwxrwxr-x+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" user01 user01 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":48 dir1\n-rw-rw-r--+ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" user01 user01    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("月   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":48 file1\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user01@xiaoshaozi dir2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ getfacl dir1 file1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: dir1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: user01")]),t._v("\nuser::rwx\nuser:user01:rwx\ngroup::r-x\nmask::rwx\nother::r-x\ndefault:user::rwx\ndefault:user:user01:rwx\ndefault:group::r-x\ndefault:mask::rwx\ndefault:other::r-x\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# file: file1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# owner: user01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# group: user01")]),t._v("\nuser::rw-\nuser:user01:rwx                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#effective:rw-")]),t._v("\ngroup::r-x                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#effective:r--")]),t._v("\nmask::rw-\nother::r--\n\n")])])]),s("h3",{attrs:{id:"查看acl策略-getfacl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看acl策略-getfacl"}},[t._v("#")]),t._v(" 查看ACL策略(getfacl)")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getfacl 文件名")]),t._v("\n")])])]),s("h2",{attrs:{id:"chattr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chattr"}},[t._v("#")]),t._v(" chattr")]),t._v(" "),s("blockquote",[s("p",[t._v("文件系统属性chattr权限")])]),t._v(" "),s("p",[t._v("1、命令格式")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#chattr [+-=] [选项]文件或目录名")]),t._v("\n选项：\n\t+:\t增加权限\n\t-:\t删除权限\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(":\t等于某权限\n\ti:\t对文件，不允许对文件进行删除、改名，也不能添加和修改数据；\n\t\t对目录，只能修改目录下文件的数据，但不允许建立和删除文件。\n\ta:\t对文件，只能在文件中增加数据，但是不能删除也不能修改数据；\n\t\t对目录，只允许在目录中建立和修改文件，但是不允许删除\n\te:\tLinux中绝大多数的文件都默认拥有e属性。\n\t\t表示该文件是使用ext文件系统进行存储的，而且不能使用“chattr -e”命令取消e属性。\n")])])]),s("p",[t._v("2、查看文件系统属性lsattr")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# lsattr 选项 文件名")]),t._v("\n选项：\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\t显示所有文件和目录\n\t"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\t若目标是目录，仅列出目录本身的属性，而不是子文件的\n")])])]),s("p",[t._v("3、举例")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("例1：\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给文件赋予i属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch ftest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#建立测试文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chattr +i ftest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rm -rf ftest")]),t._v("\nrm:无法删除"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ftest"')]),t._v(":不允许的操作\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#赋予i属性后，root也不能删除")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 111 >> ftes")]),t._v("\n-bash: ftest: 权限不够\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#也不能修改文件的数据")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给目录赋予i属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir dtest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#建立测试目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost dtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch dtest/abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#再建立一个测试文件abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chattr +i dtest/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给目录赋予i属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd dtest/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost dtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch bcd")]),t._v("\ntouch:无法创建"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bcd"')]),t._v(":权限不够\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#dtest目录不能新建文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost dtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 11 >> abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost dtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#但是可以修改文件内容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost dtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rm -rf abc")]),t._v("\nrm:无法删除"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"abc"')]),t._v(":权限不够\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#不能删除")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("例2：\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir -p /back/log")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#建立备份目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chattr +a /back/log/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#赋予a属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cp /var/log/messages /back/log/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#可以复制文件和新建文件到指定目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rm -rf /back/log/messages")]),t._v("\nrm:无法删除"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/back/log/messages"')]),t._v(":不允许的操作\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#但是不允许删除")]),t._v("\n")])])]),s("h1",{attrs:{id:"课后实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#课后实战"}},[t._v("#")]),t._v(" 课后实战")]),t._v(" "),s("h2",{attrs:{id:"作业1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作业1"}},[t._v("#")]),t._v(" 作业1")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("root用户新建目录 /tmp/dir1，要求目录的所属组是tom")])]),t._v(" "),s("li",[s("p",[t._v("创建tom用户，tom用户是否允许在/tmp/dir1下建立文件tomfile？如果不允许，如何让tom用户在/tmp/dir1目录里创建文件tomfile?")])]),t._v(" "),s("li",[s("p",[t._v("用户jack如果想修改tom用户创建的tomfile文件，怎么做？")])])]),t._v(" "),s("h2",{attrs:{id:"作业2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作业2"}},[t._v("#")]),t._v(" 作业2")]),t._v(" "),s("p",[t._v("以普通用户user01身份登录，新建公共目录/shared/sysadmin并且属于sysadmin组")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("要求组成员有读写访问的权限，其他成员没有任何权限；")])]),t._v(" "),s("li",[s("p",[t._v("要求任何人在/shared/sysadmin面创建的文件全部属于sysadmin组")])]),t._v(" "),s("li",[s("p",[t._v("要求harry可写，natasha不能读写")])]),t._v(" "),s("li",[s("p",[t._v("要求该目录下的文件只有root和文件创建者可以删，其他人不能删除别人的文件")])])]),t._v(" "),s("h2",{attrs:{id:"综合练习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#综合练习"}},[t._v("#")]),t._v(" 综合练习")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("使用普通用户stu1登录系统，并在/u01/STU1目录下创建一个文件zhangsan，内容为：我是某某某，我要努力学习！我一定能行的！加油！（I am jack, I want to study hard,I can do it,come on）")])]),t._v(" "),s("li",[s("p",[t._v("使用stu2用户登录系统，并修改stu1用户刚刚创建的文件zhangsan，增加内容：我要和你挑战（I want to challenge you）！并在相同的目录下创建一个自己的文件lisi，内容同上")])]),t._v(" "),s("li",[s("p",[t._v("stu3用户同时可以查看stu1和stu2两个用户的文件，但是不能做任何修改")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);