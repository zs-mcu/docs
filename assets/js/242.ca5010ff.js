(window.webpackJsonp=window.webpackJsonp||[]).push([[242],{1485:function(t,s,e){"use strict";e.r(s);var r=e(4),o=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"错误-没有子进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误-没有子进程"}},[t._v("#")]),t._v(" 错误--没有子进程")]),t._v(" "),s("blockquote",[s("p",[t._v("linux fork: retry: 没有子进程、资源暂时不可用问题解决")])]),t._v(" "),s("p",[t._v("普通用户执行命令时，有时候会报如下错误")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-bash: fork: retry: 没有子进程\n-bash: fork: retry: 没有子进程\n-bash: fork: retry: 没有子进程\n-bash: fork: retry: 资源暂时不可用\n")])])]),s("p",[t._v("是因为该用户的线程满了导致的。通过"),s("code",[t._v("ulimit -a")]),t._v("命令查看可以看到该用户的"),s("code",[t._v("max user processes")]),t._v("值是1024或者4096。对比查看root用户的，可以看到是unlimited。")]),t._v(" "),s("p",[t._v("知道问题出在哪儿，就好解决了。\n解决方法1、直接使用"),s("code",[t._v("ulimit -u")]),t._v("命令修改即可。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[sgs@localhost ~]$ ulimit -u 10000\n[sgs@localhost ~]$ ulimit -u\n10000\n")])])]),s("p",[t._v("解决方法2、通过修改配置文件中该参数的值即可。")]),t._v(" "),s("p",[t._v("centos7.5中配置文件为"),s("code",[t._v("/etc/security/limits.d/20-nproc.conf")]),t._v("。\n网上的参考资料中centos6为"),s("code",[t._v("/etc/security/limits.d/90-nproc.conf")]),t._v("这个未验证。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[sgs@localhost ~]$ sudo vi /etc/security/limits.d/20-nproc.conf\n\n# Default limit for number of user's processes to prevent\n# accidental fork bombs.\n# See rhbz #432903 for reasoning.\n\n*          soft    nproc     4096\nroot       soft    nproc     unlimited\n")])])]),s("p",[t._v("修改4096为10000（所需的值）保存即可。注意需要用户重新登录才能生效，这一步网上许多关于修改配置文件的解决方法后都没提，要注意。")])])}),[],!1,null,null,null);s.default=o.exports}}]);