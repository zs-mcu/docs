(window.webpackJsonp=window.webpackJsonp||[]).push([[229],{1425:function(e,t,s){"use strict";s.r(t);var o=s(4),r=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"docker默认存储目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker默认存储目录"}},[e._v("#")]),e._v(" docker默认存储目录")]),e._v(" "),t("p",[e._v("当你在使用 Docker 时，如果 /var/lib/docker 目录的空间不足，可能会导致一些问题，如无法创建新的容器或无法下载镜像等。为了解决这个问题，你可以采取以下几个步骤：")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("清理无用的镜像和容器：\n使用 "),t("code",[e._v("docker system prune")]),e._v(" 命令可以清理掉未使用的镜像、停止的容器和无用的网络等资源。这将释放一些磁盘空间。")])]),e._v(" "),t("li",[t("p",[e._v("移动 Docker 数据目录：\n如果你的 "),t("code",[e._v("/var/lib/docker")]),e._v(" 目录所在的分区空间非常有限，你可以考虑将 Docker 的数据目录迁移到另一个具有足够空间的分区上。\n首先，停止 Docker 服务："),t("code",[e._v("systemctl stop docker")]),e._v("。\n然后，将 "),t("code",[e._v("/var/lib/docker")]),e._v(" 目录下的所有内容复制到新的目录中（例如 "),t("code",[e._v("/new/docker")]),e._v("）。\n接下来，在 "),t("code",[e._v("/etc/docker/daemon.json")]),e._v(" 文件中添加以下配置项：")]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("vim /etc/docker/daemon.json\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data-root"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/new/docker"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("保存并退出文件，然后启动 Docker 服务："),t("code",[e._v("systemctl start docker")]),e._v("。这样 Docker 将使用新的数据目录来存储镜像、容器等数据。")])]),e._v(" "),t("li",[t("p",[e._v("调整 Docker 镜像存储位置：\nDocker 默认将镜像存储在 "),t("code",[e._v("/var/lib/docker")]),e._v(" 目录下的 "),t("code",[e._v("overlay2")]),e._v(" 文件夹中。\n你可以修改 Docker 配置，将镜像存储到具有更多空间的位置。\n首先，停止 Docker 服务："),t("code",[e._v("systemctl stop docker")]),e._v("。然后，编辑 "),t("code",[e._v("/etc/docker/daemon.json")]),e._v(" 文件，在其中添加以下配置项：")]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("vim /etc/docker/daemon.json\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" \n    "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"graph"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/new/image/storage/path"')]),e._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" \n")])])]),t("p",[e._v("将 "),t("code",[e._v("/new/image/storage/path")]),e._v(" 替换为一个具有足够空间的目录路径。\n保存并退出文件，然后启动 Docker 服务："),t("code",[e._v("systemctl start docker")]),e._v("。")])])]),e._v(" "),t("p",[e._v("这些方法都可以帮助你解决 "),t("code",[e._v("/var/lib/docker")]),e._v(" 空间不足的问题，并确保 Docker 的正常运行。记得在操作前备份重要的数据，以免丢失。")])])}),[],!1,null,null,null);t.default=r.exports}}]);